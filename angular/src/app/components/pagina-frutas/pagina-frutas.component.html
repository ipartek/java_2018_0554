<div class="col-12">
  <h1>CRUD Frutas</h1>
  <app-alerta [mensaje]="mensaje"></app-alerta>

  <div class="border border-danger p-2">
    <p>Valores: {{ formulario.value | json }}</p>
    <p>Estado: {{ formulario.status | json }}</p>
    <p>Oferta: {{ formulario.value.oferta | json }}</p>
  </div>

      <form [formGroup]="formulario" (submit)="nueva()" class="col-12 m-1 jumbotron">
        <div class="d-flex">
          <div class="col-6">
            <div class="form-group">
              <label for="nombre">Nombre</label>
              <input type="text" formControlName="nombre"
              class="form-control" placeholder= "Nombre de la fruta (Minimo 3 letras)">
              <small *ngIf="formulario.controls.nombre.invalid && formulario.controls.nombre.touched" class="text-danger">*Nombre no válido</small>
            </div>
            <div class="d-flex justify-content-between">
              <div class="form-group col-3">
                  <label for="precio">Precio</label>
                  <input type="number" formControlName="precio"
                  class="form-control" placeholder= "Precio de la fruta">
                  <small *ngIf="formulario.controls.precio.invalid && formulario.controls.precio.touched" class="text-danger">*Precio no válido</small>
              </div>
              <div class="form-group col-2">
                  <label for="oferta">Oferta</label>
                  <input type="checkbox" name="oferta" formControlName="oferta">
              </div>
              <div *ngIf="formulario.controls.oferta.value" class="form-group col-3">
                  <label for="descuento">Descuento <b>{{ formulario.controls.descuento.value }} %</b></label>
                  <input type="range" formControlName="descuento"
                  class="form-control" min="0" max="99" >
              </div>
            </div>
            <div class="form-group">
                <label for="imagen">Imagen</label>
                <input type="text" formControlName="imagen"
                class="form-control" placeholder= "Imagen de la fruta">
                <small *ngIf="formulario.controls.imagen.invalid && formulario.controls.imagen.touched" class="text-danger">*Debe ser una URL de imagen válida empezar por http(s) y terminar .png o .jp(e)g</small>
            </div>
          </div>
          <div class="col-6 m-3 p-1">
            <img class="img-formulario" src="{{formulario.controls.imagen.value}}" alt="{{formulario.controls.nombre.value}}">
          </div>
        </div>
        <button type="submit"
            class="btn btn-block btn-primary mt-3"
            [disabled]="formulario.invalid">
            {{(frutaSeleccionada.id == -1)?'Crear':'Modificar'}}
        </button>
      </form>

  <div class="d-flex flex-row flex-wrap justify-content-between">
    <div *ngFor="let fruta of frutas"
      class="col-5 d-flex justify-content-around align-items-center border border-secondary m-1">
      
      <img class="rounded-circle shadow p-1 bg-primary rounded" src="{{fruta.imagen}}" alt="fruta.nombre">   
         
      <div class="d-flex flex-column justify-content-start align-items-start">
        <b>{{fruta.nombre | titlecase }}</b>
        
      </div>
      <span *ngIf="fruta.oferta" class="d-flex flex-column">
        <del class="text-secondary">
          {{ fruta.precio | moneda: 'es' }}
        </del>
        {{ fruta.precio - ((fruta.precio * fruta.descuento) / 100) | number: '1.0-2' | moneda: 'es' }}
        <span class="badge badge-primary">{{ fruta.descuento | moneda: 'desc' }}</span>
      </span>
      <span *ngIf="!fruta.oferta" class="d-flex flex-column">
        {{ fruta.precio }}
        <!-- <span class="badge badge-danger">{{ 0 | moneda: 'desc' }}</span> -->
        <span class="text-danger">Sin oferta</span>
      </span>
      <i (click)="editar(fruta)" class="fas fa-edit"></i>
      <i (click)="delete(fruta)" class="fas fa-trash-alt"></i>
     </div> <!-- div For -->
</div>
</div>


  
  
